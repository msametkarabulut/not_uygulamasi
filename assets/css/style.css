/* NoteFlow — modern dark-sidebar theme */

/* ── Utility sizing (icon classes) ── */
.w-3  { width: .75rem;  }  .h-3  { height: .75rem;  }
.w-3\.5{width: .875rem; }  .h-3\.5{height: .875rem; }
.w-4  { width: 1rem;    }  .h-4  { height: 1rem;    }
.w-5  { width: 1.25rem; }  .h-5  { height: 1.25rem; }
.w-6  { width: 1.5rem;  }  .h-6  { height: 1.5rem;  }
.w-7  { width: 1.75rem; }  .h-7  { height: 1.75rem; }
.w-8  { width: 2rem;    }  .h-8  { height: 2rem;    }

/* All SVG and IMG icons: consistent baseline behavior */
svg, img.w-3, img.w-4, img.w-5, img.w-6, img.w-7, img.w-8 {
  display: inline-block;
  vertical-align: middle;
  flex-shrink: 0;
}

/* ── Variables ── */
:root {
  --bg: 220 20% 97%;
  --fg: 225 25% 12%;
  --card: 0 0% 100%;
  --card-fg: 225 25% 12%;
  --primary: 230 55% 28%;
  --primary-fg: 0 0% 100%;
  --secondary: 215 70% 52%;
  --secondary-fg: 0 0% 100%;
  --muted: 220 15% 93%;
  --muted-fg: 225 15% 42%;
  --border: 220 15% 88%;
  --input: 220 15% 88%;
  --destructive: 0 65% 55%;
  --radius: .625rem;

  --sb-bg: 232 45% 14%;
  --sb-fg: 0 0% 95%;
  --sb-primary: 215 70% 55%;
  --sb-primary-fg: 0 0% 12%;
  --sb-accent: 230 40% 22%;
  --sb-accent-fg: 0 0% 95%;
  --sb-border: 230 35% 20%;

  --shadow-sm: 0 1px 2px rgba(0,0,0,.05);
  --shadow: 0 4px 6px -1px rgba(0,0,0,.07), 0 2px 4px -2px rgba(0,0,0,.05);
  --shadow-lg: 0 10px 15px -3px rgba(0,0,0,.08), 0 4px 6px -4px rgba(0,0,0,.04);
}

/* ── Reset ── */
*, *::before, *::after { box-sizing: border-box; margin: 0; }
body {
  font-family: system-ui, -apple-system, 'Segoe UI', Roboto, sans-serif;
  background: hsl(var(--bg));
  color: hsl(var(--fg));
  min-height: 100vh;
  -webkit-font-smoothing: antialiased;
}
a { color: inherit; text-decoration: none; }
button { font: inherit; }
img { max-width: 100%; }

.app-wrap { display: flex; height: 100vh; overflow: hidden; width: 100%; }

/* ════════════════════════════════════════════
   SIDEBAR
   ════════════════════════════════════════════ */
.sidebar {
  width: 15.5rem;
  flex-shrink: 0;
  background: hsl(var(--sb-bg));
  color: hsl(var(--sb-fg));
  display: flex;
  flex-direction: column;
  border-right: 1px solid hsl(var(--sb-border));
}

/* Logo */
.sidebar-logo {
  display: flex;
  align-items: center;
  gap: .75rem;
  padding: 1.25rem 1rem .75rem;
}
.sidebar-logo-icon {
  width: 2.25rem; height: 2.25rem;
  border-radius: .75rem;
  background: hsl(var(--sb-primary));
  color: hsl(var(--sb-primary-fg));
  display: flex; align-items: center; justify-content: center;
  flex-shrink: 0;
}
.sidebar-logo-icon svg { width: 1.25rem; height: 1.25rem; }
.sidebar-title { font-size: 1.125rem; font-weight: 700; letter-spacing: -.02em; }
.sidebar-badge {
  display: flex; align-items: center; gap: .375rem;
  font-size: .7rem; color: rgba(255,255,255,.45);
}
.dot { width: 6px; height: 6px; border-radius: 50%; background: hsl(var(--sb-primary)); }

/* Nav */
.sidebar-nav {
  flex: 1; overflow-y: auto;
  padding: .5rem .625rem;
  display: flex; flex-direction: column; gap: .125rem;
}
.nav-item {
  display: flex; align-items: center; justify-content: space-between;
  gap: .5rem;
  padding: .5rem .75rem;
  border-radius: .5rem;
  font-size: .8125rem; font-weight: 500;
  color: rgba(255,255,255,.75);
  text-decoration: none;
  transition: background .15s, color .15s;
  cursor: pointer;
}
.nav-item:hover { background: hsl(var(--sb-accent)); color: hsl(var(--sb-fg)); }
.nav-item.active { background: hsl(var(--sb-primary)); color: hsl(var(--sb-primary-fg)); }

.nav-item-inner {
  display: flex; align-items: center; gap: .625rem;
  min-width: 0;
}
.nav-item-inner svg { flex-shrink: 0; }

.nav-badge {
  min-width: 1.25rem; height: 1.25rem;
  border-radius: 9999px;
  font-size: .7rem;
  display: flex; align-items: center; justify-content: center;
  background: hsl(var(--sb-accent));
  color: rgba(255,255,255,.55);
  flex-shrink: 0;
}
.nav-item.active .nav-badge { background: rgba(0,0,0,.12); color: inherit; }

/* Folders section */
.sidebar-section { margin-top: .75rem; }
.section-toggle {
  display: flex; align-items: center; gap: .375rem;
  width: 100%; padding: .375rem .75rem;
  font-size: .6875rem; font-weight: 600;
  text-transform: uppercase; letter-spacing: .06em;
  color: rgba(255,255,255,.35);
  background: none; border: none; cursor: pointer; text-align: left;
}
.section-toggle svg { flex-shrink: 0; }

.folders-list { display: none; }
.folders-list.open { display: flex; flex-direction: column; gap: .125rem; margin-top: .25rem; }

.folder-row {
  display: flex; align-items: center; justify-content: space-between;
  padding: .4rem .75rem; border-radius: .5rem;
  font-size: .8125rem; color: rgba(255,255,255,.75);
  transition: background .15s, box-shadow .15s;
}
.folder-row:hover { background: hsl(var(--sb-accent)); color: hsl(var(--sb-fg)); }
.folder-row.active { background: hsl(var(--sb-primary)); color: hsl(var(--sb-primary-fg)); }

.folder-link {
  display: flex; align-items: center; gap: .625rem;
  text-decoration: none; color: inherit; flex: 1; min-width: 0;
}
.folder-link svg { flex-shrink: 0; }
.folder-link span { overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }

.folder-count {
  font-size: .7rem; min-width: 1.25rem; height: 1.25rem;
  border-radius: 9999px;
  display: flex; align-items: center; justify-content: center;
  background: hsl(var(--sb-accent)); color: rgba(255,255,255,.4);
  margin-left: .25rem; flex-shrink: 0;
}
.folder-row.active .folder-count { background: rgba(0,0,0,.12); color: inherit; }

.create-folder { color: rgba(255,255,255,.45) !important; }

/* Drag-drop target */
.folder-row.drop-over {
  background: hsl(var(--sb-primary) / .6);
  outline: 2px dashed hsl(var(--sb-primary));
  outline-offset: -2px;
  color: hsl(var(--sb-fg));
}

/* Sidebar bottom */
.sidebar-bottom {
  border-top: 1px solid hsl(var(--sb-border));
  padding: .625rem;
  flex-shrink: 0;
}
.sidebar-bottom .nav-item { margin: 0; }

/* ════════════════════════════════════════════
   MAIN CONTENT
   ════════════════════════════════════════════ */
.main-content {
  flex: 1; display: flex; flex-direction: column;
  overflow: hidden; background: hsl(var(--bg));
}

/* Page header */
.page-header {
  flex-shrink: 0;
  display: flex; align-items: center; gap: .75rem;
  padding: .625rem 1.25rem;
  border-bottom: 1px solid hsl(var(--border));
  background: hsl(var(--card));
}
.page-header h2 { margin: 0; }
.page-header svg { flex-shrink: 0; }

/* Search */
.search-wrap { position: relative; width: 100%; max-width: 26rem; }
.search-wrap svg {
  position: absolute; left: .75rem; top: 50%; transform: translateY(-50%);
  width: 1rem; height: 1rem; color: hsl(var(--muted-fg)); pointer-events: none;
}
.search-wrap input {
  width: 100%; height: 2.25rem;
  padding-left: 2.25rem; padding-right: .75rem;
  border-radius: .625rem; border: 1px solid hsl(var(--border));
  background: hsl(var(--bg)); font-size: .8125rem; color: hsl(var(--fg));
}
.search-wrap input:focus { outline: none; box-shadow: 0 0 0 2px hsl(var(--primary) / .15); }

/* Header actions */
.header-actions {
  margin-left: auto;
  display: flex; align-items: center; gap: .5rem;
}

/* Buttons */
.btn {
  display: inline-flex; align-items: center; justify-content: center; gap: .375rem;
  padding: .4rem .875rem; font-size: .8125rem; font-weight: 500;
  border-radius: .5rem; border: none; cursor: pointer; text-decoration: none;
  transition: background .15s, filter .15s; white-space: nowrap;
  line-height: 1.4;
}
.btn svg { flex-shrink: 0; }
.btn-primary { background: hsl(var(--primary)); color: hsl(var(--primary-fg)); }
.btn-primary:hover { filter: brightness(1.1); }
.btn-ghost { background: transparent; color: hsl(var(--fg)); }
.btn-ghost:hover { background: hsl(var(--muted)); }
.btn-icon { width: 2.25rem; height: 2.25rem; padding: 0; }
.btn-sm { padding: .25rem .625rem; font-size: .75rem; }

/* View toggle */
.view-toggle {
  display: flex; border-radius: .5rem;
  border: 1px solid hsl(var(--border)); background: hsl(var(--card)); overflow: hidden;
}
.view-toggle button,
.view-toggle a.btn {
  width: 2rem; height: 2rem; border: none; background: none; cursor: pointer;
  color: hsl(var(--muted-fg));
  display: flex; align-items: center; justify-content: center;
  text-decoration: none; border-radius: 0; padding: 0;
}
.view-toggle button:hover,
.view-toggle a.btn:hover { color: hsl(var(--fg)); }
.view-toggle button.active,
.view-toggle a.btn.active { background: hsl(var(--primary)); color: hsl(var(--primary-fg)); }

.page-body { flex: 1; overflow-y: auto; padding: 1.25rem; }

/* ════════════════════════════════════════════
   NOTE GRID & LIST
   ════════════════════════════════════════════ */
.notes-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(240px, 1fr));
  gap: .875rem;
  width: 100%;
}
.notes-list { display: flex; flex-direction: column; gap: .5rem; }

/* Card */
.note-card {
  border-radius: .875rem; border: 1px solid transparent;
  box-shadow: var(--shadow-sm);
  transition: transform .15s, box-shadow .15s;
  overflow: hidden; display: flex; flex-direction: column;
  position: relative; cursor: grab;
}
.note-card:hover { transform: translateY(-2px); box-shadow: var(--shadow-lg); }
.note-card.dragging { opacity: .5; transform: rotate(2deg); }

.note-card .note-actions {
  position: absolute; top: .5rem; right: .5rem;
  display: flex; gap: .25rem; opacity: 0; transition: opacity .15s;
}
.note-card:hover .note-actions { opacity: 1; }
.note-card .note-actions button,
.note-card .note-actions a {
  width: 1.625rem; height: 1.625rem; border-radius: 9999px; border: none;
  background: rgba(255,255,255,.65); backdrop-filter: blur(4px);
  cursor: pointer; display: flex; align-items: center; justify-content: center;
  color: hsl(var(--fg)); text-decoration: none; padding: 0;
}
.note-card .note-actions button:hover,
.note-card .note-actions a:hover { background: rgba(255,255,255,.9); }
.note-card .note-actions svg { width: .8125rem; height: .8125rem; }

.note-card .note-body {
  padding: 1rem 1.125rem; text-align: left; cursor: pointer; flex: 1;
  text-decoration: none; color: inherit; display: block;
}
.note-card .note-title { font-size: .9375rem; font-weight: 700; margin: 0; line-height: 1.3; }
.note-card .note-preview {
  margin-top: .375rem; font-size: .8125rem; line-height: 1.5; opacity: .8;
  display: -webkit-box; -webkit-line-clamp: 4; -webkit-box-orient: vertical; overflow: hidden;
}
.note-card .note-footer {
  display: flex; align-items: center; justify-content: space-between;
  padding: .4rem 1.125rem; border-top: 1px solid rgba(0,0,0,.06);
  font-size: .6875rem; opacity: .65;
}
.note-card.favorite .note-footer .star-icon { color: hsl(var(--secondary)); }
.note-card.favorite .note-footer .star-icon svg { fill: hsl(var(--secondary)); }

/* List row */
.note-row {
  display: flex; align-items: center; gap: .75rem;
  padding: .625rem .875rem; border-radius: .625rem;
  border: 1px solid hsl(var(--border)); background: hsl(var(--card));
  box-shadow: var(--shadow-sm); transition: box-shadow .15s; cursor: grab;
}
.note-row:hover { box-shadow: var(--shadow); }
.note-row.dragging { opacity: .5; }
.note-row .note-row-content { flex: 1; min-width: 0; cursor: pointer; }
.note-row .note-row-title { font-weight: 600; font-size: .875rem; margin: 0; }
.note-row .note-row-preview {
  margin-top: .125rem; font-size: .8125rem; color: hsl(var(--muted-fg));
  white-space: nowrap; overflow: hidden; text-overflow: ellipsis;
}
.note-row .note-row-date { font-size: .7rem; color: hsl(var(--muted-fg)); flex-shrink: 0; }
.note-row .note-actions { display: flex; gap: .25rem; }
.note-row .note-actions button,
.note-row .note-actions a {
  background: transparent; border: none; cursor: pointer;
  padding: .25rem; color: hsl(var(--muted-fg)); display: inline-flex;
  align-items: center; justify-content: center;
}
.note-row .note-actions button:hover,
.note-row .note-actions a:hover { color: hsl(var(--fg)); }

/* Empty state */
.empty-state {
  display: flex; flex-direction: column; align-items: center; justify-content: center;
  padding: 4rem 1rem; text-align: center;
}
.empty-state .empty-icon {
  width: 3.5rem; height: 3.5rem; border-radius: .875rem;
  background: hsl(var(--muted)); color: hsl(var(--muted-fg));
  display: flex; align-items: center; justify-content: center;
}
.empty-state .empty-icon svg { width: 1.75rem; height: 1.75rem; }
.empty-state h3 { margin-top: .875rem; font-size: 1rem; }
.empty-state p { margin-top: .25rem; font-size: .8125rem; color: hsl(var(--muted-fg)); }

/* ════════════════════════════════════════════
   AUTH (login / register)
   ════════════════════════════════════════════ */
.auth-page {
  min-height: 100vh;
  background: linear-gradient(165deg, hsl(232 45% 16%) 0%, hsl(232 50% 10%) 100%);
  display: flex; align-items: center; justify-content: center; padding: 1rem;
}
.auth-box { width: 100%; max-width: 26rem; }
.auth-header { text-align: center; margin-bottom: 1.75rem; }
.auth-header .auth-logo {
  width: 3.25rem; height: 3.25rem; border-radius: .875rem;
  background: hsl(var(--secondary)); color: hsl(var(--secondary-fg));
  display: flex; align-items: center; justify-content: center;
  margin: 0 auto .625rem;
}
.auth-header .auth-logo svg { width: 1.5rem; height: 1.5rem; }
.auth-header h1 { font-size: 1.375rem; color: #fff; margin: 0; }
.auth-header p { font-size: .8125rem; color: rgba(255,255,255,.55); margin-top: .375rem; }

.auth-card {
  border-radius: .875rem; border: 1px solid rgba(255,255,255,.08);
  background: rgba(255,255,255,.04); padding: 1.75rem;
  box-shadow: 0 25px 50px -12px rgba(0,0,0,.3); backdrop-filter: blur(8px);
}
.auth-card label {
  display: block; font-size: .8125rem; font-weight: 500;
  color: rgba(255,255,255,.75); margin-bottom: .375rem;
}
.auth-card input {
  width: 100%; height: 2.375rem; padding: 0 .75rem 0 2.25rem;
  border-radius: .5rem; border: 1px solid rgba(255,255,255,.1);
  background: rgba(255,255,255,.05); color: #fff; font-size: .8125rem;
}
.auth-card input::placeholder { color: rgba(255,255,255,.25); }
.auth-card input:focus { outline: none; box-shadow: 0 0 0 2px hsl(var(--secondary) / .4); }
.input-wrap { position: relative; margin-bottom: .875rem; }
.input-wrap svg {
  position: absolute; left: .75rem; top: 50%; transform: translateY(-50%);
  width: .9375rem; height: .9375rem; color: rgba(255,255,255,.35);
  pointer-events: none;
}
.auth-card .btn {
  width: 100%; height: 2.5rem; margin-top: .375rem; font-weight: 600;
  background: hsl(var(--secondary)); color: hsl(var(--secondary-fg));
}
.auth-card .btn:hover { filter: brightness(1.08); }
.auth-footer {
  text-align: center; margin-top: 1.25rem;
  font-size: .8125rem; color: rgba(255,255,255,.45);
}
.auth-footer a { color: hsl(var(--secondary)); font-weight: 500; }
.auth-footer a:hover { text-decoration: underline; }
.auth-error {
  color: #f87171; font-size: .8125rem; margin-bottom: .875rem;
  padding: .5rem .75rem; border-radius: .375rem;
  background: rgba(248,113,113,.08); border: 1px solid rgba(248,113,113,.15);
}

.demo-credentials {
  margin-top: 1.25rem; padding: .75rem; border-radius: .5rem;
  background: rgba(255,255,255,.05); border: 1px solid rgba(255,255,255,.08);
  font-size: .75rem;
}
.demo-credentials .demo-title { margin: 0 0 .375rem; font-weight: 600; color: rgba(255,255,255,.7); }
.demo-credentials .demo-row {
  display: flex; flex-wrap: wrap; align-items: center;
  gap: .25rem .5rem; margin-top: .25rem; color: rgba(255,255,255,.6);
}
.demo-credentials .demo-role { min-width: 4rem; font-weight: 500; color: hsl(var(--secondary)); }
.demo-credentials .demo-sep { color: rgba(255,255,255,.35); }

/* ════════════════════════════════════════════
   USER NAV DROPDOWN
   ════════════════════════════════════════════ */
.user-nav { position: relative; }
.user-nav .user-btn {
  width: 2rem; height: 2rem; border-radius: 9999px;
  border: 2px solid hsl(var(--primary) / .2);
  background: hsl(var(--primary)); color: hsl(var(--primary-fg));
  font-size: .7rem; font-weight: 600; cursor: pointer;
  display: flex; align-items: center; justify-content: center;
  transition: box-shadow .15s;
}
.user-nav .user-btn:hover { box-shadow: 0 0 0 3px hsl(var(--primary) / .15); }

.user-nav .dropdown {
  position: absolute; top: calc(100% + .375rem); right: 0;
  min-width: 13rem; background: hsl(var(--card));
  border: 1px solid hsl(var(--border)); border-radius: .5rem;
  box-shadow: var(--shadow-lg); padding: .375rem; z-index: 50;
  display: none;
}
.user-nav.open .dropdown { display: block; }

.user-nav .user-info {
  padding: .5rem .625rem; margin-bottom: .25rem;
  border-bottom: 1px solid hsl(var(--border));
}
.user-nav .user-info-name { font-weight: 600; font-size: .8125rem; margin: 0; }
.user-nav .user-info-email { font-size: .75rem; color: hsl(var(--muted-fg)); margin: .125rem 0 0; }

.user-nav .dropdown-item {
  display: flex; align-items: center; gap: .625rem;
  padding: .4375rem .625rem; font-size: .8125rem;
  color: hsl(var(--fg)); text-decoration: none;
  border-radius: .375rem; border: none; background: none;
  width: 100%; cursor: pointer; text-align: left;
  line-height: 1.4;
}
.user-nav .dropdown-item:hover { background: hsl(var(--muted)); }
.user-nav .dropdown-item.text-danger { color: hsl(var(--destructive)); }

.user-nav .dropdown-icon {
  display: flex; align-items: center; justify-content: center;
  width: 1rem; height: 1rem; flex-shrink: 0;
}
.user-nav .dropdown-icon svg { width: 1rem; height: 1rem; }

.user-nav .dropdown-divider {
  height: 1px; background: hsl(var(--border));
  margin: .25rem 0;
}

/* ════════════════════════════════════════════
   CARDS & FORMS
   ════════════════════════════════════════════ */
.section-card {
  border-radius: .875rem; border: 1px solid hsl(var(--border));
  background: hsl(var(--card)); padding: 1.25rem; margin-bottom: 1.25rem;
}
.section-card h3 { font-size: .9375rem; margin: 0 0 .25rem; }
.section-card .section-desc { font-size: .8125rem; color: hsl(var(--muted-fg)); margin-top: .25rem; }

.form-group { margin-bottom: .875rem; }
.form-group label { display: block; font-size: .8125rem; font-weight: 500; margin-bottom: .375rem; }
.form-group input,
.form-group textarea,
.form-group select {
  width: 100%; padding: .4rem .75rem; border-radius: .5rem;
  border: 1px solid hsl(var(--input)); font-family: inherit; font-size: .8125rem;
  color: hsl(var(--fg)); background: hsl(var(--card));
}
.form-group input { height: 2.25rem; }
.form-group textarea { min-height: 8rem; resize: vertical; }
.form-group select { height: 2.25rem; cursor: pointer; }
.form-group input:focus,
.form-group textarea:focus,
.form-group select:focus { outline: none; box-shadow: 0 0 0 2px hsl(var(--primary) / .15); }

.max-w-2xl { max-width: 40rem; margin-left: auto; margin-right: auto; }

/* ════════════════════════════════════════════
   MODAL OVERLAY
   ════════════════════════════════════════════ */
.modal-overlay {
  position: fixed; inset: 0; background: rgba(0,0,0,.6); backdrop-filter: blur(4px);
  z-index: 100; display: none; align-items: center; justify-content: center; padding: 1rem;
}
.modal-overlay.open { display: flex; }
.modal-content {
  background: hsl(var(--card)); border-radius: .75rem;
  max-width: 34rem; width: 100%; max-height: 90vh; overflow-y: auto;
  padding: 1.25rem; box-shadow: 0 25px 50px -12px rgba(0,0,0,.25);
  animation: modal-in .2s ease;
}
@keyframes modal-in {
  from { opacity: 0; transform: scale(.95) translateY(8px); }
  to { opacity: 1; transform: scale(1) translateY(0); }
}
.modal-content h2 { margin: 0 0 .875rem; font-size: 1rem; }
.modal-actions { display: flex; justify-content: flex-end; gap: .5rem; margin-top: .875rem; }

/* Note editor (modal + standalone page) */
.note-editor-modal .modal-content { max-width: 44rem; padding: 0; overflow: hidden; }

.note-editor-head {
  display: flex; align-items: center; justify-content: space-between;
  padding: .75rem 1rem;
  border-bottom: 1px solid hsl(var(--border));
  background: hsl(var(--card));
}
.note-editor-head .color-dots { display: flex; gap: .375rem; align-items: center; }

.color-dot {
  width: 1.625rem; height: 1.625rem; border-radius: 9999px;
  border: 2px solid transparent; cursor: pointer;
  transition: transform .1s, border-color .15s; flex-shrink: 0;
}
.color-dot:hover { transform: scale(1.15); }
.color-dot.selected {
  border-color: hsl(var(--fg)) !important;
  box-shadow: 0 0 0 2px hsl(var(--fg) / .15);
}

.note-editor-head .editor-actions { display: flex; align-items: center; gap: .125rem; }
.note-editor-head .editor-actions button,
.note-editor-head .editor-actions label {
  width: 2rem; height: 2rem; border: none; background: none; cursor: pointer;
  border-radius: .375rem; display: flex; align-items: center; justify-content: center;
  color: hsl(var(--fg)); transition: background .15s;
}
.note-editor-head .editor-actions button:hover,
.note-editor-head .editor-actions label:hover { background: hsl(var(--muted)); }

.note-editor-body {
  padding: 1.25rem 1.25rem 1rem;
  transition: background-color .2s;
}
.note-editor-body input[name="title"] {
  width: 100%; border: none; outline: none;
  font-size: 1.375rem; font-weight: 700;
  padding: 0; margin-bottom: .625rem;
  background: transparent; color: hsl(var(--fg));
}
.note-editor-body input[name="title"]::placeholder { color: hsl(var(--muted-fg)); }

.note-editor-body textarea {
  width: 100%; border: none; outline: none; resize: vertical;
  font-size: .875rem; line-height: 1.6; min-height: 12rem;
  background: transparent; color: hsl(var(--fg)); font-family: inherit;
  padding: 0;
}
.note-editor-body textarea::placeholder { color: hsl(var(--muted-fg)); }

.note-editor-foot {
  display: flex; align-items: center; justify-content: space-between;
  padding: .625rem 1.25rem;
  border-top: 1px solid hsl(var(--border));
  font-size: .75rem; color: hsl(var(--muted-fg));
  background: hsl(var(--card));
}
.note-editor-foot select {
  height: 1.75rem; padding: 0 .5rem; border-radius: .375rem;
  border: 1px solid hsl(var(--border)); font-size: .75rem;
  background: hsl(var(--card)); color: hsl(var(--fg)); cursor: pointer;
}

/* ════════════════════════════════════════════
   DROPDOWN INLINE (note card menu)
   ════════════════════════════════════════════ */
.dropdown-inline { position: relative; display: inline-block; }
.dropdown-menu-inline {
  display: none; position: absolute; right: 0; top: 100%; margin-top: .25rem;
  min-width: 8rem; background: hsl(var(--card)); border: 1px solid hsl(var(--border));
  border-radius: .375rem; box-shadow: var(--shadow-lg); z-index: 50; padding: .25rem;
}
.dropdown-inline.open .dropdown-menu-inline { display: block; }
.dropdown-menu-inline a,
.dropdown-menu-inline button {
  display: flex; align-items: center; gap: .5rem;
  width: 100%; padding: .4rem .5rem;
  font-size: .8125rem; text-align: left; border: none; background: none;
  cursor: pointer; border-radius: .25rem; text-decoration: none; color: inherit;
}
.dropdown-menu-inline a:hover,
.dropdown-menu-inline button:hover { background: hsl(var(--muted)); }
.dropdown-menu-inline .text-danger { color: hsl(var(--destructive)); }

/* ════════════════════════════════════════════
   UTILITIES
   ════════════════════════════════════════════ */
.flex { display: flex; }
.flex-col { flex-direction: column; }
.flex-wrap { flex-wrap: wrap; }
.flex-1 { flex: 1; }
.gap-2 { gap: .5rem; }
.gap-3 { gap: .75rem; }
.gap-4 { gap: 1rem; }
.gap-6 { gap: 1.5rem; }
.items-center { align-items: center; }
.items-start { align-items: flex-start; }
.items-end { align-items: flex-end; }
.justify-between { justify-content: space-between; }
.justify-center { justify-content: center; }
.min-w-0 { min-width: 0; }
.w-full { width: 100%; }
.p-3 { padding: .75rem; }
.rounded-lg { border-radius: .5rem; }
.border { border: 1px solid hsl(var(--border)); }
.text-xs { font-size: .75rem; }
.text-sm { font-size: .8125rem; }
.text-lg { font-size: 1.125rem; }
.text-xl { font-size: 1.25rem; }
.text-2xl { font-size: 1.5rem; }
.text-3xl { font-size: 1.875rem; }
.font-semibold { font-weight: 600; }
.font-bold { font-weight: 700; }
.text-center { text-align: center; }
.text-muted-foreground { color: hsl(var(--muted-fg)); }
.text-primary { color: hsl(var(--primary)); }
.text-secondary { color: hsl(var(--secondary)); }
.text-danger, .text-destructive { color: hsl(var(--destructive)); }
.bg-muted { background: hsl(var(--muted)); }
.bg-primary\/10 { background: hsl(var(--primary) / .1); }
.bg-secondary\/20 { background: hsl(var(--secondary) / .2); }
.mt-1 { margin-top: .25rem; }
.mt-2 { margin-top: .5rem; }
.mt-3 { margin-top: .75rem; }
.mt-4 { margin-top: 1rem; }
.mt-5 { margin-top: 1.25rem; }
.mt-6 { margin-top: 1.5rem; }

.grid { display: grid; }
.grid-cols-1 { grid-template-columns: repeat(1, minmax(0, 1fr)); }
@media (min-width: 640px)  { .sm\:grid-cols-2 { grid-template-columns: repeat(2, minmax(0, 1fr)); } }
@media (min-width: 1280px) { .xl\:grid-cols-4 { grid-template-columns: repeat(4, minmax(0, 1fr)); } }

/* Admin sidebar */
.admin-sidebar .sidebar-logo-icon { background: hsl(var(--secondary)); }

/* Drag ghost */
.drag-ghost { pointer-events: none; opacity: .85; transform: rotate(3deg); z-index: 999; }

/* Toast */
.toast {
  position: fixed; bottom: 1.5rem; right: 1.5rem;
  padding: .625rem 1rem; border-radius: .5rem;
  background: hsl(var(--fg)); color: hsl(var(--bg));
  font-size: .8125rem; font-weight: 500;
  box-shadow: var(--shadow-lg); z-index: 200;
  animation: toast-in .25s ease;
}
.toast.hide { animation: toast-out .2s ease forwards; }
@keyframes toast-in  { from { opacity: 0; transform: translateY(12px); } to { opacity: 1; transform: translateY(0); } }
@keyframes toast-out { from { opacity: 1; transform: translateY(0); }   to { opacity: 0; transform: translateY(12px); } }

/* Scrollbar */
::-webkit-scrollbar { width: 6px; }
::-webkit-scrollbar-track { background: transparent; }
::-webkit-scrollbar-thumb { background: hsl(var(--border)); border-radius: 3px; }
::-webkit-scrollbar-thumb:hover { background: hsl(var(--muted-fg)); }

/* ════════════════════════════════════════════
   MOBILE MENU BUTTON & SIDEBAR OVERLAY
   ════════════════════════════════════════════ */
.mobile-menu-btn {
  display: none;
  position: fixed; bottom: 1.25rem; left: 1.25rem;
  width: 3rem; height: 3rem; border-radius: 9999px;
  background: hsl(var(--primary)); color: hsl(var(--primary-fg));
  border: none; cursor: pointer; z-index: 90;
  box-shadow: 0 4px 12px rgba(0,0,0,.25);
  align-items: center; justify-content: center;
  transition: transform .15s;
}
.mobile-menu-btn:active { transform: scale(.9); }
.mobile-menu-btn svg { width: 1.25rem; height: 1.25rem; }

.sidebar-overlay {
  display: none;
  position: fixed; inset: 0;
  background: rgba(0,0,0,.5);
  z-index: 80;
  opacity: 0; transition: opacity .25s;
}

/* ════════════════════════════════════════════
   RESPONSIVE — TABLET (≤1024px)
   ════════════════════════════════════════════ */
@media (max-width: 1024px) {
  .sidebar { width: 13rem; }
  .notes-grid { grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); gap: .75rem; }
  .page-body { padding: 1rem; }
  .page-header { padding: .5rem 1rem; }
  .search-wrap { max-width: 20rem; }
}

/* ════════════════════════════════════════════
   RESPONSIVE — SMALL TABLET (≤768px)
   Sidebar → icon-only bar
   ════════════════════════════════════════════ */
@media (max-width: 768px) {
  .sidebar {
    width: 3.5rem; overflow: hidden;
  }
  .sidebar .sidebar-title,
  .sidebar .sidebar-badge,
  .sidebar .nav-badge,
  .sidebar .section-toggle,
  .sidebar .folder-link span,
  .sidebar .folder-count,
  .sidebar .create-folder,
  .sidebar-section { display: none; }

  .sidebar-logo { padding: .875rem .625rem .625rem; justify-content: center; gap: 0; }
  .sidebar-logo > div:last-child { display: none; }
  .sidebar-nav { padding: .375rem; }
  .nav-item {
    justify-content: center; padding: .625rem;
    border-radius: .5rem;
  }
  .nav-item-inner { gap: 0; }
  .nav-item-inner > :not(svg) { display: none; }
  .sidebar-bottom { padding: .375rem; }
  .sidebar-bottom .nav-item { justify-content: center; }
  .sidebar-bottom .nav-item-inner > :not(svg) { display: none; }

  .notes-grid { grid-template-columns: repeat(auto-fill, minmax(180px, 1fr)); gap: .625rem; }
  .page-body { padding: .875rem; }
  .page-header { gap: .5rem; padding: .5rem .875rem; }

  .btn span { display: none; }
  .btn svg + span { display: none; }
  .view-toggle { display: none; }

  /* Note editor modal: wider */
  .note-editor-modal .modal-content { max-width: 95vw; }
}

/* ════════════════════════════════════════════
   RESPONSIVE — MOBILE (≤640px)
   Sidebar → hidden, hamburger toggle
   ════════════════════════════════════════════ */
@media (max-width: 640px) {
  .mobile-menu-btn { display: flex; }

  .sidebar {
    position: fixed; left: 0; top: 0; bottom: 0;
    width: 15.5rem; z-index: 85;
    transform: translateX(-100%);
    transition: transform .25s ease;
    overflow: visible;
  }
  /* Show all sidebar content when open */
  .sidebar .sidebar-title,
  .sidebar .sidebar-badge,
  .sidebar .nav-badge,
  .sidebar .section-toggle,
  .sidebar .folder-link span,
  .sidebar .folder-count,
  .sidebar .create-folder,
  .sidebar-section { display: revert; }
  .sidebar-logo { padding: 1.25rem 1rem .75rem; justify-content: flex-start; gap: .75rem; }
  .sidebar-logo > div:last-child { display: block; }
  .sidebar-nav { padding: .5rem .625rem; }
  .nav-item { justify-content: space-between; padding: .5rem .75rem; }
  .nav-item-inner { gap: .625rem; }
  .nav-item-inner > :not(svg) { display: inline; }
  .sidebar-bottom { padding: .625rem; }
  .sidebar-bottom .nav-item { justify-content: space-between; }
  .sidebar-bottom .nav-item-inner > :not(svg) { display: inline; }

  .sidebar-open .sidebar { transform: translateX(0); }
  .sidebar-open .sidebar-overlay { display: block; opacity: 1; }
  .sidebar-open .mobile-menu-btn { display: none; }

  .app-wrap { flex-direction: column; }
  .main-content { width: 100%; }

  .page-header {
    flex-wrap: wrap; gap: .5rem; padding: .5rem .75rem;
  }
  .search-wrap { max-width: 100%; order: 10; flex-basis: 100%; }
  .header-actions { gap: .375rem; }

  .notes-grid { grid-template-columns: 1fr; gap: .625rem; }

  .note-row { flex-wrap: wrap; gap: .5rem; }
  .note-row .note-row-date { font-size: .65rem; }

  .page-body { padding: .75rem; }

  /* Modal: full screen on mobile */
  .modal-overlay { padding: 0; align-items: flex-end; }
  .modal-content {
    max-width: 100%; max-height: 95vh;
    border-radius: .75rem .75rem 0 0;
    animation: modal-slide-up .25s ease;
  }
  @keyframes modal-slide-up {
    from { transform: translateY(100%); }
    to   { transform: translateY(0); }
  }
  .note-editor-modal .modal-content { max-width: 100%; border-radius: .75rem .75rem 0 0; }
  .note-editor-body textarea { min-height: 8rem; }

  /* Profile stats */
  .flex.gap-4.mt-6 { flex-direction: column; }

  /* Auth pages */
  .auth-box { max-width: 100%; }
  .auth-card { padding: 1.25rem; }

  /* Toast */
  .toast { left: 1rem; right: 1rem; bottom: 5rem; text-align: center; }

  /* User dropdown */
  .user-nav .dropdown { min-width: 11rem; }
}

/* ════════════════════════════════════════════
   RESPONSIVE — VERY SMALL (≤380px)
   ════════════════════════════════════════════ */
@media (max-width: 380px) {
  .page-header h2 { font-size: .9375rem; }
  .btn { padding: .35rem .625rem; font-size: .75rem; }
  .note-card .note-body { padding: .75rem; }
  .note-card .note-title { font-size: .8125rem; }
  .note-card .note-preview { font-size: .75rem; -webkit-line-clamp: 3; }
  .section-card { padding: 1rem; }
  .form-group label { font-size: .75rem; }
  .note-editor-body input[name="title"] { font-size: 1.125rem; }
  .color-dot { width: 1.375rem; height: 1.375rem; }
  .auth-header h1 { font-size: 1.125rem; }
}
